<!DOCTYPE html>
<html>
 <head>
  <title>CSV File to HTML Table Using AJAX jQuery</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
  <script src= "./PapaParse-4.3.2/papaparse.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 </head>
 <body>
  <div class="container">
   <div class="table-responsive">
    <h1 align="center">Optimize Airbnb Listing</h1>
    <br />
    <p> Plot neighborhood and average nightly price for each type (home vs apartment, whole place vs single room) </p>
    <p> Plot Dates vs availability and average price </p>

    <br />
    <div id="employee_table">
    </div>
   </div>
  </div>
 </body>
</html>

<script>

	function displayData(data)
	{
		var table_data = '<table class="table table-bordered table-striped">';

		for(var i = 0; i < data.length; i++)
    	{
     		table_data += '<tr>';
     		table_data += '<th>' + data[i][0] + '</th>'; // id
     		table_data += '<td>' + data[i][2] + '</td>'; // neighborhood
     		table_data += '<td>' + data[i][3] + '</td>'; // latitude
     		table_data += '<td>' + data[i][4] + '</td>'; // longitude
     		table_data += '<td>' + data[i][11] + '</td>'; // price
     		table_data += '<td>' + data[i][12] + '</td>'; // weekly price
     		table_data += '<td>' + data[i][20] + '</td>'; // review scores rating
     		table_data += '</tr>';
     	}

		table_data += '</table>';
    	$('#employee_table').html(table_data);
	}

  	function parseData(callBack) 
  	{
    	//var file = new File("./airbnb-sep-2017/listings.csv");
 
    	Papa.parse("./airbnb-sep-2017/listings.csv", 
    	{
      		download: true,
      		complete: function(results) 
      		{
        		callBack(results.data);
      		}
    	});
  	}

  	parseData(displayData);
</script>